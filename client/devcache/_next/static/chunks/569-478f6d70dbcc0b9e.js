"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569],{891:(e,s,t)=>{t.d(s,{A:()=>m});var l=t(5155),a=t(2115),i=t(5239),r=t(2529),n=t(1873),d=t(6485),o=t(5937),c=t(9141),x=t(6561);function m(e){let{donor:s,onViewDetails:t}=e,[m,u]=(0,a.useState)(!1),h=(e=>{switch(e){case"available":return{color:"bg-green-100 text-green-800",text:"Available"};case"emergency":return{color:"bg-red-100 text-red-800",text:"Emergency Only"};case"unavailable":return{color:"bg-gray-100 text-gray-800",text:"Unavailable"};default:return{color:"bg-gray-100 text-gray-800",text:"Unknown"}}})(s.availability);return(0,l.jsxs)("div",{className:"bg-white rounded-isf-lg shadow-isf hover:shadow-lg transition-all duration-300 p-6 border ".concat("emergency"===s.availability?"border-red-200 ring-2 ring-red-100":"border-gray-100"," ").concat(m?"transform -translate-y-1":""),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[(0,l.jsxs)("div",{className:"flex items-start space-x-4 mb-4",children:[(0,l.jsxs)("div",{className:"relative",children:[s.image?(0,l.jsx)(i.default,{src:s.image,alt:s.name,width:64,height:64,className:"w-16 h-16 rounded-full object-cover",priority:!1}):(0,l.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-primary-dark rounded-full flex items-center justify-center text-white font-bold text-xl",children:s.name.split(" ").map(e=>e[0]).join("").toUpperCase()}),s.verified&&(0,l.jsx)("div",{className:"absolute -bottom-1 -right-1 bg-green-500 rounded-full p-1",children:(0,l.jsx)(r.A,{className:"w-4 h-4 text-white"})})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,l.jsx)("h3",{className:"font-semibold text-lg text-text-primary",children:s.name}),s.verified&&(0,l.jsx)(r.A,{className:"w-5 h-5 text-green-500"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat({"A+":"bg-red-100 text-red-800","A-":"bg-red-100 text-red-800","B+":"bg-blue-100 text-blue-800","B-":"bg-blue-100 text-blue-800","AB+":"bg-purple-100 text-purple-800","AB-":"bg-purple-100 text-purple-800","O+":"bg-green-100 text-green-800","O-":"bg-orange-100 text-orange-800"}[s.bloodGroup]||"bg-gray-100 text-gray-800"),children:s.bloodGroup}),(0,l.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(h.color),children:h.text})]})]})]}),(0,l.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,l.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,l.jsx)(n.A,{className:"w-4 h-4 mr-2"}),(0,l.jsx)("span",{children:(()=>{let e="number"!=typeof(null==s?void 0:s.distance)||Number.isNaN(s.distance)?null:"".concat(Math.round(s.distance)," km"),t=(null==s?void 0:s.address)||(null==s?void 0:s.city)||void 0;return e&&t?"".concat(e," — ").concat(t):e||t||"Location unavailable"})()})]}),(0,l.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,l.jsx)(d.A,{className:"w-4 h-4 mr-2"}),(0,l.jsxs)("span",{children:["Last donated: ",s.lastDonation]})]})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{onClick:()=>t(s),className:"flex-1 bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded-isf text-sm font-medium transition-colors duration-200",children:"View Details"}),(0,l.jsx)("button",{className:"p-2 border border-gray-300 hover:border-primary hover:text-primary rounded-isf transition-colors duration-200",children:(0,l.jsx)(o.A,{className:"w-4 h-4"})}),(0,l.jsx)("button",{className:"p-2 border border-gray-300 hover:border-primary hover:text-primary rounded-isf transition-colors duration-200",children:(0,l.jsx)(c.A,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:()=>{try{let e=null==s?void 0:s.coords,t=(null==s?void 0:s.address)||(null==s?void 0:s.city)||"",l="";if((null==e?void 0:e.lat)&&(null==e?void 0:e.lng))l="https://www.google.com/maps/dir/?api=1&destination=".concat(e.lat,",").concat(e.lng);else{if(!t)return;l="https://www.google.com/maps/dir/?api=1&destination=".concat(encodeURIComponent(t))}window.open(l,"_blank","noopener,noreferrer")}catch(e){}},disabled:!(null==s?void 0:s.coords)&&!(null==s?void 0:s.address)&&!(null==s?void 0:s.city),"aria-label":"Open directions in Google Maps",className:"p-2 border border-gray-300 hover:border-primary hover:text-primary rounded-isf transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,l.jsx)(x.A,{className:"w-4 h-4"})})]})]})}},6485:(e,s,t)=>{t.d(s,{A:()=>l});let l=(0,t(1847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6561:(e,s,t)=>{t.d(s,{A:()=>l});let l=(0,t(1847).A)("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]])},7859:(e,s,t)=>{t.d(s,{A:()=>p});var l=t(5155),a=t(2115),i=t(5239),r=t(2529),n=t(5229),d=t(508),o=t(6485),c=t(1873),x=t(3457),m=t(9141),u=t(3664),h=t(6561),g=t(5490);function p(e){var s,t,p,v,b,y;let{donor:f,isOpen:j,onClose:N}=e,[w,A]=(0,a.useState)(!1),[k,C]=(0,a.useState)(!1),[D,M]=(0,a.useState)(null),[B,q]=(0,a.useState)(!1),[E,G]=(0,a.useState)("");if((0,a.useEffect)(()=>{let e=!0;return async function(){var s,t,l;if(!j||!(null==f?void 0:f.id)){e&&M(null);return}q(!0),G("");try{let l=null;try{"undefined"!=typeof navigator&&"geolocation"in navigator&&(l=await new Promise(e=>{navigator.geolocation.getCurrentPosition(s=>e({lat:s.coords.latitude,lng:s.coords.longitude}),()=>e(null),{enableHighAccuracy:!0,timeout:3e3})}))}catch(e){}let a=l?{lat:l.lat,lng:l.lng,radiusKm:25}:void 0,i=await g.Ay.getDonor(f.id,a),r=(null==i?void 0:i.donor)||(null==i||null==(s=i.data)?void 0:s.donor)||null;console.info("[DonorProfileModal] fetched details",{id:null==f?void 0:f.id,name:null==f?void 0:f.name,gender:null==r?void 0:r.gender,age:null==r?void 0:r.age,distance:null!=(t=null==r?void 0:r.distance)?t:null==f?void 0:f.distance,requestCount:null==r?void 0:r.requestCount,phone:null==r?void 0:r.phone,source:r?"api":"none"}),e&&M(r)}catch(s){e&&G((null==s||null==(l=s.data)?void 0:l.message)||(null==s?void 0:s.message)||"Failed to load donor details")}finally{e&&q(!1)}}(),()=>{e=!1}},[j,null==f?void 0:f.id]),(0,a.useEffect)(()=>{var e,s,t,l,a,i,r,n,d;j&&f&&console.debug("[DonorProfileModal] donor view",{id:null==f?void 0:f.id,name:null==f?void 0:f.name,gender:null!=(s=null!=(e=null==D?void 0:D.gender)?e:null==f?void 0:f.gender)?s:null,age:null!=(l=null!=(t=null==D?void 0:D.age)?t:null==f?void 0:f.age)?l:null,distance:null!=(a=null==f?void 0:f.distance)?a:null,phone:null!=(r=null!=(i=null==D?void 0:D.phone)?i:null==f?void 0:f.phone)?r:null,email:null!=(d=null!=(n=null==D?void 0:D.email)?n:null==f?void 0:f.email)?d:null})},[j,f,D]),!j||!f)return null;let O=e=>({"A+":"bg-red-100 text-red-800","A-":"bg-red-100 text-red-800","B+":"bg-blue-100 text-blue-800","B-":"bg-blue-100 text-blue-800","AB+":"bg-purple-100 text-purple-800","AB-":"bg-purple-100 text-purple-800","O+":"bg-green-100 text-green-800","O-":"bg-orange-100 text-orange-800"})[e]||"bg-gray-100 text-gray-800",S=(null==D?void 0:D.donationHistory)||f.donationHistory||[],U=Array.isArray(S)?S.length:0,L=(null==D?void 0:D.lastDonation)||f.lastDonation||"—",P=(null!=(s=null==D?void 0:D.gender)?s:f.gender)||"—",R=null!=(t=null==D?void 0:D.age)?t:f.age,_=null!=(p=null==D?void 0:D.distance)?p:f.distance,H=f.address||(null==D?void 0:D.address)||"—",I=(null!=(v=null==D?void 0:D.phone)?v:f.phone)||"—",z=(null!=(b=null==D?void 0:D.email)?b:f.email)||"—",T=null!=(y=null==D?void 0:D.requestCount)?y:f.requestCount;return(0,l.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,l.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:N}),(0,l.jsxs)("div",{className:"inline-block w-full max-w-2xl p-4 sm:p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-isf-lg",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("div",{className:"relative",children:[f.image?(0,l.jsx)(i.default,{src:f.image,alt:f.name,width:80,height:80,className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full object-cover",priority:!1}):(0,l.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-primary to-primary-dark rounded-full flex items-center justify-center text-white font-bold text-xl sm:text-2xl",children:f.name.split(" ").map(e=>e[0]).join("").toUpperCase()}),f.verified&&(0,l.jsx)("div",{className:"absolute -bottom-1 -right-1 bg-green-500 rounded-full p-1",children:(0,l.jsx)(r.A,{className:"w-6 h-6 text-white"})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,l.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-text-primary",children:f.name}),f.verified&&(0,l.jsx)(r.A,{className:"w-6 h-6 text-green-500"})]}),(0,l.jsx)("span",{className:"px-3 py-1.5 rounded-full text-base sm:text-lg font-medium ".concat(O(f.bloodGroup)),children:f.bloodGroup})]})]}),(0,l.jsx)("button",{onClick:N,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors duration-200",children:(0,l.jsx)(n.A,{className:"w-6 h-6"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3 sm:gap-4 mb-4",children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(d.A,{className:"w-5 h-5 text-gray-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Gender"}),(0,l.jsx)("div",{className:"font-medium",children:P})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(o.A,{className:"w-4 h-4 lg:w-5 lg:h-5 text-gray-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Age"}),(0,l.jsxs)("div",{className:"font-medium",children:["number"==typeof R?R:R||"—"," years"]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(c.A,{className:"w-4 h-4 lg:w-5 lg:h-5 text-gray-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Distance"}),(0,l.jsxs)("div",{className:"font-medium",children:[null==_?"—":_," km away"]})]})]})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(o.A,{className:"w-4 h-4 lg:w-5 lg:h-5 text-gray-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Last Donation"}),(0,l.jsx)("div",{className:"font-medium",children:L})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(x.A,{className:"w-4 h-4 lg:w-5 lg:h-5 text-gray-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Total Donations"}),(0,l.jsxs)("div",{className:"font-medium",children:[U," times"]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(c.A,{className:"w-4 h-4 lg:w-5 lg:h-5 text-gray-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Address"}),(0,l.jsx)("div",{className:"font-medium",children:H})]})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-4",children:[(0,l.jsxs)("div",{className:"bg-red-50 rounded-isf p-3 sm:p-4 text-center",children:[(0,l.jsx)("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold mb-1 ".concat(O(f.bloodGroup).replace("bg-","text-").replace("-100","-600")),children:f.bloodGroup}),(0,l.jsx)("div",{className:"text-[11px] sm:text-xs text-gray-600",children:"Blood Type"})]}),(0,l.jsxs)("div",{className:"bg-blue-50 rounded-isf p-3 sm:p-4 text-center",children:[(0,l.jsx)("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-blue-600 mb-1",children:U}),(0,l.jsx)("div",{className:"text-[11px] sm:text-xs text-gray-600",children:"Donate"})]}),(0,l.jsxs)("div",{className:"bg-green-50 rounded-isf p-3 sm:p-4 text-center",children:[(0,l.jsx)("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-green-600 mb-1",children:null==T?"—":T}),(0,l.jsx)("div",{className:"text-[11px] sm:text-xs text-gray-600",children:"Request"})]})]}),(0,l.jsxs)("div",{className:"hidden sm:block bg-gradient-to-r from-primary to-primary-dark rounded-isf-lg p-6 text-center text-white mb-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"One Drop Can Save a Life"}),(0,l.jsx)("p",{className:"text-sm opacity-90",children:"Easily save lives and connect with nearby drives instantly."})]}),(0,l.jsxs)("div",{className:"mb-4 p-3 sm:p-4 bg-gray-50 rounded-isf",children:[(0,l.jsx)("h3",{className:"font-semibold text-base sm:text-lg mb-2",children:"Contact Information"}),w?(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(m.A,{className:"w-4 h-4 lg:w-5 lg:h-5 text-gray-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-xs sm:text-sm text-gray-500",children:"Phone"}),(0,l.jsx)("div",{className:"text-sm sm:text-base font-medium",children:I})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(u.A,{className:"w-4 h-4 lg:w-5 lg:h-5 text-gray-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-xs sm:text-sm text-gray-500",children:"Email"}),(0,l.jsx)("div",{className:"text-sm sm:text-base font-medium",children:z})]})]})]}):(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("p",{className:"text-gray-600 mb-3",children:"Contact information is protected for privacy. Click below to reveal."}),(0,l.jsx)("button",{onClick:()=>{C(!0)},className:"bg-primary hover:bg-primary-dark text-white px-5 py-2 rounded-isf font-medium transition-colors duration-200",children:"Reveal Contact"})]})]}),(0,l.jsxs)("div",{className:"flex space-x-3 mb-4",children:[(0,l.jsx)("button",{className:"flex-1 bg-primary hover:bg-primary-dark text-white px-4 py-2 sm:px-6 sm:py-3 rounded-isf font-medium transition-colors duration-200",children:"Request Donation"}),(0,l.jsxs)("button",{className:"px-3 py-2 sm:px-6 sm:py-3 border border-gray-300 hover:border-primary hover:text-primary rounded-isf font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>{I&&"—"!==I&&(window.location.href="tel:".concat(I))},children:[(0,l.jsx)(m.A,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Call"})]}),(0,l.jsxs)("button",{className:"px-3 py-2 sm:px-6 sm:py-3 border border-gray-300 hover:border-primary hover:text-primary rounded-isf font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>{if(H&&"—"!==H){let e=encodeURIComponent(H);window.open("https://www.google.com/maps/search/?api=1&query=".concat(e),"_blank")}},children:[(0,l.jsx)(h.A,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Directions"})]})]}),(0,l.jsxs)("div",{className:"hidden md:block",children:[(0,l.jsx)("h3",{className:"font-semibold text-base sm:text-lg mb-4",children:"Donation History"}),B?(0,l.jsx)("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-isf",children:"Loading donation history..."}):E?(0,l.jsx)("div",{className:"text-center py-8 text-red-600 bg-red-50 rounded-isf",children:E}):S.length>0?(0,l.jsx)("div",{className:"overflow-hidden border border-gray-200 rounded-isf",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hospital"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Units"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map((e,s)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:e.date}),(0,l.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:e.hospital}),(0,l.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:e.units})]},s))})]})}):(0,l.jsxs)("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-isf",children:[(0,l.jsx)(x.A,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,l.jsx)("p",{children:"No donation history available"})]})]})]})]}),k&&(0,l.jsx)("div",{className:"fixed inset-0 z-60 overflow-y-auto",children:(0,l.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,l.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"}),(0,l.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-isf-lg",children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Contact Reveal"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"I confirm this request is for genuine medical purposes and I will use the contact information responsibly."}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsx)("button",{onClick:()=>{A(!0),C(!1);try{var e;let s=(null!=(e=null==D?void 0:D.phone)?e:null==f?void 0:f.phone)||"—";console.log("[DonorProfileModal] contact revealed",{id:null==f?void 0:f.id,name:null==f?void 0:f.name,phone:s})}catch(e){}},className:"flex-1 bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded-isf font-medium transition-colors duration-200",children:"Confirm"}),(0,l.jsx)("button",{onClick:()=>C(!1),className:"flex-1 border border-gray-300 hover:border-gray-400 text-gray-700 px-4 py-2 rounded-isf font-medium transition-colors duration-200",children:"Cancel"})]})]})]})})]})}}}]);